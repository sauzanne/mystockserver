
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script type="text/javascript" src="js/jquery2.24.min.js"></script>
<script type="text/javascript" src="js/commonDemo.js"></script>
<link rel="stylesheet" href="css/commonDemo.css" type="text/css" />
<script type="text/javascript">
	
	
	var urlServer = location.href.substring(0, location.href.indexOf("mystockserver") + 14)+ "api/";
			
	function getLast(dType) {
		$.ajax({
			type : 'GET',
			headers : {"Authorization": "Basic "+$("#idToken").val()},
			dataType : dType,
			url : urlServer + "finance/stockprice/getLast?s="+$("#idStockTicker").val()+"&p="+$("#idPlace").val(),
			success : function(data, textStatus, jqXHR) {
				$("#idResults").val(jqXHR.responseText);
			},
			error : function(jqXHR, textStatus, errorThrown) {
				$("#idResults").val('Une erreur est survenue.');
			}
		});

	}
	
	
	function getLastForList(dType) {
		$.ajax({
			type : 'GET',
			headers : {"Authorization": "Basic "+$("#idToken").val()},
			dataType : dType,
			url : urlServer + "finance/stockprice/getLastForList?s="+$("#idStockTicker").val()+"&p="+$("#idPlace").val(),
			success : function(data, textStatus, jqXHR) {
				$("#idResults").val(jqXHR.responseText);
			},
			error : function(jqXHR, textStatus, errorThrown) {
				$("#idResults").val('Une erreur est survenue.');
			}
		});

	}

	
	function getPriceForPeriod(dType) {
		$.ajax({
			type : 'GET',
			headers : {"Authorization": "Basic "+$("#idToken").val()},
			dataType : dType,
			url : urlServer + "finance/stockprice/getPriceForPeriod?s="+$("#idStockTicker").val()+"&p="+$("#idPlace").val()+"&ps="+$("#start").val()+"&pe="+$("#end").val(),
			success : function(data, textStatus, jqXHR) {
				$("#idResults").val(jqXHR.responseText);
			},
			error : function(jqXHR, textStatus, errorThrown) {
				$("#idResults").val('Une erreur est survenue.');
			}
		});
	}

	function getCheckStock(dType) {
		$.ajax({
			type : 'GET',
			headers : {"Authorization": "Basic "+$("#idToken").val()},
			dataType : dType,
			url : urlServer + "finance/stockprice/getCheckStock?s="+$("#idStockTicker").val()+"&p="+$("#idPlace").val(),
			success : function(data, textStatus, jqXHR) {
				$("#idResults").val(jqXHR.responseText);
			},
			error : function(jqXHR, textStatus, errorThrown) {
				$("#idResults").val('Une erreur est survenue.');
			}
		});
	}
	
	function getAveragePrice(dType) {
		$.ajax({
			type : 'GET',
			headers : {"Authorization": "Basic "+$("#idToken").val()},
			dataType : dType,
			url : urlServer + "finance/stockprice/getAveragePrice?s="+$("#idStockTicker").val()+"&p="+$("#idPlace").val()+"&ps="+$("#start").val()+"&pe="+$("#end").val(),
			success : function(data, textStatus, jqXHR) {
				$("#idResults").val(jqXHR.responseText);
			},
			error : function(jqXHR, textStatus, errorThrown) {
				$("#idResults").val('Une erreur est survenue.');
			}
		});
	}


	
	//{'Authorization : Basic '+$("#idToken")}



	function disableButton(name) {
		if (document.getElementsByName(name)[0].disabled) {
			document.getElementsByName(name)[0].disabled = false;
		} else {
			document.getElementsByName(name)[0].disabled = true;
		}

	}


</script>
</head>
<body>
	<input type="text" id="idToken" placeHolder="Your token">
	<br />
	<input type="text" id="idStockTicker" placeHolder="Stock ticker">
	<br />
	<input type="text" id="idPlace" placeHolder="Code place">
	<br /> Date format YYYY-MM-DD ex : '2011-12-03'
	<br />
	<input type="text" id="start" placeHolder="start date">
	<br />
	<input type="text" id="end" placeHolder="end date">
	<br />

	<input type="button" onclick="getLast('text')" value="getLast">
	<input type="button" onclick="getPriceForPeriod('text')"
		value="getPriceForPeriod">
	<input type="button" onclick="getCheckStock('text')"
		value="getCheckStock">
	<input type="button" onclick="getAveragePrice('text')"
		value="getAveragePrice">
	<input type="button" onclick="getLastForList('text')"
		value="getLastForList">


	<br />

	<textarea cols="50" id="idResults">
	</textarea>


</body>

</html>